# List declared aliases, functions, paths
alias aliases="alias | sed 's/=.*//'"
alias functions="declare -f | grep '^[a-z].* ()' | sed 's/{$//'"
alias paths='echo -e ${PATH//:/\\n}'

# Change directory more easily
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."

# Check internet speed
alias speedtest="wget -O /dev/null http://speed.transip.nl/100mb.bin"

# Update everything
alias LevelUp="dotfiles update && dotfiles clean"

# Exclude macOS specific files in ZIP archives
alias zip="zip -x *.DS_Store -x *__MACOSX* -x *.AppleDouble*"

# VSCodium (use 'code' command for muscle memory)
alias code="codium"

# Modern CLI replacements
alias ls="eza --icons --group-directories-first"
alias ll="eza --icons --group-directories-first -la"
alias la="eza --icons --group-directories-first -a"
alias lt="eza --icons --group-directories-first --tree --level=2"

# bat (cat with syntax highlighting) - Ubuntu installs as 'batcat'
if command -v batcat &>/dev/null; then
    alias bat="batcat"
    alias cat="batcat --paging=never"
elif command -v bat &>/dev/null; then
    alias cat="bat --paging=never"
fi

# === rclone cloud sync ===
# Prerequisites: run 'rclone config' to set up remotes, then 'sync-init-*' once per remote
alias sync-gdrive-work='rclone bisync ~/gdrive-work gdrive-work: --resync-mode newer --create-empty-src-dirs --drive-skip-dangling-shortcuts --drive-skip-gdocs --ignore-errors --resilient --filter-from=$HOME/.dotfiles/rclone/gdrive-filters.txt'
alias sync-gdrive-personal='rclone bisync ~/gdrive-personal gdrive-personal: --resync-mode newer --create-empty-src-dirs --drive-skip-dangling-shortcuts --drive-skip-gdocs --ignore-errors --resilient --filter-from=$HOME/.dotfiles/rclone/gdrive-filters.txt'
alias sync-box='rclone bisync ~/box box: --resync-mode newer --create-empty-src-dirs'
alias sync-all='~/.dotfiles/bin/sync-cloud'

# First-time init (run once per remote after 'rclone config')
alias sync-init-gdrive-work='rclone bisync ~/gdrive-work gdrive-work: --resync --create-empty-src-dirs --drive-skip-dangling-shortcuts --drive-skip-gdocs --ignore-errors --resilient --filter-from=$HOME/.dotfiles/rclone/gdrive-filters.txt'
alias sync-init-gdrive-personal='rclone bisync ~/gdrive-personal gdrive-personal: --resync --create-empty-src-dirs --drive-skip-dangling-shortcuts --drive-skip-gdocs --ignore-errors --resilient --filter-from=$HOME/.dotfiles/rclone/gdrive-filters.txt'
alias sync-init-box='rclone bisync ~/box box: --resync --create-empty-src-dirs'

# Status / management
alias rclone-status='rclone listremotes'
alias rclone-log='cat /tmp/rclone-sync.log'

# === Platform-specific aliases ===
if [[ "$OSTYPE" == darwin* ]]; then
    # macOS: Log off
    alias logoff="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"

    # macOS: Show/hide desktop icons
    alias desktopshow="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"
    alias desktophide="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"

    # macOS: Recursively remove Apple meta files
    alias cleanupds="find ~/Documents -type f -name '*.DS_Store' -ls -delete"
    alias cleanupad="find ~/Documents -type d -name '.AppleD*' -ls -exec rm -r {} +"

    # macOS: Empty trash
    alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

    # macOS: Open PDF with Preview
    alias preview="open -a Preview"

    # macOS: Open anything with default app
    alias o="open"
    alias oo="open ."

elif [[ "$OSTYPE" == linux* ]]; then
    # Linux: Log off (GNOME/systemd)
    alias logoff="gnome-session-quit --logout --no-prompt 2>/dev/null || loginctl terminate-user $USER"

    # Linux: Empty trash
    alias emptytrash="rm -rfv ~/.local/share/Trash/*"

    # Linux: Open with default app
    alias o="xdg-open"
    alias oo="xdg-open ."

    # Linux: Open PDF with default viewer
    alias preview="xdg-open"
fi
